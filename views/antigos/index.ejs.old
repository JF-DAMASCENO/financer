<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= titulo %></title>
    <link rel="stylesheet" href="/css/menu.css">
    <link rel="stylesheet" href="/css/dashboard.css">
   
</head>

<body>

    <!-- barra de navegação -->
    <%- include('./partials/navbar') %>

    <div class="container">
        <h1><%= titulo %></h1>
        
        <div class="resumo">
            <div class="card entradas">
                <h3>Entradas</h3>
                <div class="valor">R$ <%= totais.entradas %></div>
            </div>
            <div class="card saidas">
                <h3>Saídas</h3>
                <div class="valor">R$ <%= totais.saidas %></div>
            </div>
            <div class="card saldo">
                <h3>Saldo</h3>
                <div class="valor">R$ <%= totais.saldo %></div>
            </div>
        </div>
        


        
        <h3>Transações</h3>
        <% if (transacoes && transacoes.length > 0) { %>
            <table>
                <thead>
                    <tr>
                        <th>Data</th>
                        <th>Descrição</th>
                        <th>Categoria</th>
                        <th>Tipo</th>
                        <th>Valor</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody>
                    <% transacoes.forEach(function(transacao) { %>
                        <tr>
                            <td><%= transacao.data %></td>
                            <td><%= transacao.descricao %></td>
                            <td><%= transacao.categoria %></td>
                            <td class="<%= transacao.tipo.toLowerCase() %>"><%= transacao.tipo %></td>
                            <td class="<%= transacao.tipo.toLowerCase() %>">R$ <%= transacao.valor.toFixed(2) %></td>
                            <td>
                                <a href="/principal/excluir/<%= transacao.id %>" class="btn-excluir" onclick="return confirm('Excluir?')">Excluir</a>
                            </td>
                        </tr>
                    <% }); %>
                </tbody>
            </table>
        <% } else { %>
            <p>Nenhuma transação cadastrada.</p>
        <% } %>
    </div>

    <script>
        // Mobile Menu Toggle
        const navToggle = document.getElementById('navToggle');
        const navMenu = document.getElementById('navMenu');

        navToggle.addEventListener('click', () => {
            navMenu.classList.toggle('active');
            navToggle.innerHTML = navMenu.classList.contains('active') ? 
                '<span class="nav-icon">✕</span>' : 
                '<span class="nav-icon">☰</span>';
        });

        // Close menu when clicking outside
        document.addEventListener('click', (e) => {
            if (!navToggle.contains(e.target) && !navMenu.contains(e.target)) {
                navMenu.classList.remove('active');
                navToggle.innerHTML = '<span class="nav-icon">☰</span>';
            }
        });

        // Active link management
        const currentPage = window.location.pathname;
        const navLinks = document.querySelectorAll('.nav-link');

        navLinks.forEach(link => {
            if (link.getAttribute('href') === currentPage) {
                link.classList.add('active');
            }

            link.addEventListener('click', () => {
                navLinks.forEach(l => l.classList.remove('active'));
                link.classList.add('active');
                
                // Close mobile menu after click
                if (window.innerWidth <= 968) {
                    navMenu.classList.remove('active');
                    navToggle.innerHTML = '<span class="nav-icon">☰</span>';
                }
            });
        });

        // Smooth scroll and animations
        document.addEventListener('DOMContentLoaded', () => {
            // Add loading animation
            const cards = document.querySelectorAll('.card');
            cards.forEach((card, index) => {
                card.style.animationDelay = `${index * 0.1}s`;
            });
        });
    </script>
</body>
</html>