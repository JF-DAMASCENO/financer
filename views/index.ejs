<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= titulo %></title>
    <link rel="stylesheet" href="/css/menu.css">
    <link rel="stylesheet" href="/css/dashboard.css">
   
</head>

<body>
    <!-- Barra de Navega√ß√£o -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="/principal" class="nav-brand">FinancerPro</a>
            
            <button class="nav-toggle" id="navToggle">
                <span class="nav-icon">‚ò∞</span>
            </button>

            <ul class="nav-menu" id="navMenu">
                <li class="nav-item">
                    <a href="/principal" class="nav-link active">
                        <span class="nav-icon">üìä</span>
                        Dashboard
                        <span class="nav-indicator"></span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="./transacoes" class="nav-link">
                        <span class="nav-icon">üí∏</span>
                        Adicionar Transa√ß√£o
                        <span class="nav-indicator"></span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="./historico" class="nav-link">
                        <span class="nav-icon">üìà</span>
                        Hist√≥rico
                        <span class="nav-indicator"></span>
                    </a>
                </li>
               
            </ul>

            <div class="user-menu">
                <div class="user-avatar">JS</div>
            </div>
        </div>
    </nav>

    <div class="container">
        <h1><%= titulo %></h1>
        
        <div class="resumo">
            <div class="card entradas">
                <h3>Entradas</h3>
                <div class="valor">R$ <%= totais.entradas %></div>
            </div>
            <div class="card saidas">
                <h3>Sa√≠das</h3>
                <div class="valor">R$ <%= totais.saidas %></div>
            </div>
            <div class="card saldo">
                <h3>Saldo</h3>
                <div class="valor">R$ <%= totais.saldo %></div>
            </div>
        </div>
        
        <div class="form-container">
            <h3>Nova Transa√ß√£o</h3>
            <form action="/principal/adicionar" method="POST">
                <div class="form-row">
                    <div class="form-group">
                        <label>Data:</label>
                        <input type="date" name="data" required value="<%= new Date().toISOString().split('T')[0] %>">
                    </div>
                    <div class="form-group">
                        <label>Descri√ß√£o:</label>
                        <input type="text" name="descricao" placeholder="Descri√ß√£o" required>
                    </div>
                    <div class="form-group">
                        <label>Categoria:</label>
                        <select name="categoria" required>
                            <option value="">Selecione</option>
                            <option value="Receita">Receita</option>
                            <option value="Moradia">Moradia</option>
                            <option value="Alimenta√ß√£o">Alimenta√ß√£o</option>
                            <option value="Transporte">Transporte</option>
                            <option value="Sa√∫de">Sa√∫de</option>
                            <option value="Outros">Outros</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Tipo:</label>
                        <select name="tipo" required>
                            <option value="">Selecione</option>
                            <option value="Entrada">Entrada</option>
                            <option value="Sa√≠da">Sa√≠da</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Valor R$:</label>
                        <input type="number" name="valor" step="0.01" min="0.01" placeholder="0.00" required>
                    </div>
                </div>
                <button type="submit">Adicionar</button>
            </form>
        </div>
        
        <h3>Transa√ß√µes</h3>
        <% if (transacoes && transacoes.length > 0) { %>
            <table>
                <thead>
                    <tr>
                        <th>Data</th>
                        <th>Descri√ß√£o</th>
                        <th>Categoria</th>
                        <th>Tipo</th>
                        <th>Valor</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody>
                    <% transacoes.forEach(function(transacao) { %>
                        <tr>
                            <td><%= transacao.data %></td>
                            <td><%= transacao.descricao %></td>
                            <td><%= transacao.categoria %></td>
                            <td class="<%= transacao.tipo.toLowerCase() %>"><%= transacao.tipo %></td>
                            <td class="<%= transacao.tipo.toLowerCase() %>">R$ <%= transacao.valor.toFixed(2) %></td>
                            <td>
                                <a href="/principal/excluir/<%= transacao.id %>" class="btn-excluir" onclick="return confirm('Excluir?')">Excluir</a>
                            </td>
                        </tr>
                    <% }); %>
                </tbody>
            </table>
        <% } else { %>
            <p>Nenhuma transa√ß√£o cadastrada.</p>
        <% } %>
    </div>

    <script>
        // Mobile Menu Toggle
        const navToggle = document.getElementById('navToggle');
        const navMenu = document.getElementById('navMenu');

        navToggle.addEventListener('click', () => {
            navMenu.classList.toggle('active');
            navToggle.innerHTML = navMenu.classList.contains('active') ? 
                '<span class="nav-icon">‚úï</span>' : 
                '<span class="nav-icon">‚ò∞</span>';
        });

        // Close menu when clicking outside
        document.addEventListener('click', (e) => {
            if (!navToggle.contains(e.target) && !navMenu.contains(e.target)) {
                navMenu.classList.remove('active');
                navToggle.innerHTML = '<span class="nav-icon">‚ò∞</span>';
            }
        });

        // Active link management
        const currentPage = window.location.pathname;
        const navLinks = document.querySelectorAll('.nav-link');

        navLinks.forEach(link => {
            if (link.getAttribute('href') === currentPage) {
                link.classList.add('active');
            }

            link.addEventListener('click', () => {
                navLinks.forEach(l => l.classList.remove('active'));
                link.classList.add('active');
                
                // Close mobile menu after click
                if (window.innerWidth <= 968) {
                    navMenu.classList.remove('active');
                    navToggle.innerHTML = '<span class="nav-icon">‚ò∞</span>';
                }
            });
        });

        // Smooth scroll and animations
        document.addEventListener('DOMContentLoaded', () => {
            // Add loading animation
            const cards = document.querySelectorAll('.card');
            cards.forEach((card, index) => {
                card.style.animationDelay = `${index * 0.1}s`;
            });
        });
    </script>
</body>
</html>